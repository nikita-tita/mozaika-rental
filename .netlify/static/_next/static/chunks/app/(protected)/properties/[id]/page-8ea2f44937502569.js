(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9374],{4621:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(72895).A)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]])},18533:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(72895).A)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},19420:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(72895).A)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},21342:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>O});var t=a(95155),l=a(12115),r=a(35695),i=a(6874),c=a.n(i),n=a(41665),d=a(18533),x=a(53904),h=a(35169),o=a(4621),m=a(72895);let j=(0,m.A)("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]),p=(0,m.A)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);var y=a(62525),u=a(28199),N=a(4516),v=a(27414);let g=(0,m.A)("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),f=(0,m.A)("Bed",[["path",{d:"M2 4v16",key:"vw9hq8"}],["path",{d:"M2 8h18a2 2 0 0 1 2 2v10",key:"1dgv2r"}],["path",{d:"M2 17h20",key:"18nfp3"}],["path",{d:"M6 8v9",key:"1yriud"}]]),b=(0,m.A)("Bath",[["path",{d:"M9 6 6.5 3.5a1.5 1.5 0 0 0-1-.5C4.683 3 4 3.683 4 4.5V17a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-5",key:"1r8yf5"}],["line",{x1:"10",x2:"8",y1:"5",y2:"7",key:"h5g8z4"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"7",x2:"7",y1:"19",y2:"21",key:"16jp00"}],["line",{x1:"17",x2:"17",y1:"19",y2:"21",key:"1pxrnk"}]]);var w=a(69074),k=a(84616),A=a(57434),C=a(81586),S=a(34576),E=a(17580),P=a(19420),M=a(28883),z=a(59434),T=a(24040),I=a(90490);let L={"Wi-Fi":"\uD83D\uDCF6",Телевизор:"\uD83D\uDCFA",Кофеварка:"☕",Кондиционер:"❄️",Парковка:"\uD83D\uDE97",Балкон:"\uD83C\uDFE0",Лифт:"\uD83D\uDED7",Охрана:"\uD83D\uDC6E",Спортзал:"\uD83D\uDCAA",Бассейн:"\uD83C\uDFCA"};function O(){var e;let s=(0,r.useParams)(),a=(0,r.useRouter)(),i=s.id,[m,O]=(0,l.useState)(null),[q,V]=(0,l.useState)(!0),[D,R]=(0,l.useState)(null),[_,B]=(0,l.useState)(0),[H,F]=(0,l.useState)(!1),[J,U]=(0,l.useState)(!1),[W,Y]=(0,l.useState)(!1),[Z,$]=(0,l.useState)(!1),[G,K]=(0,l.useState)(!1),[Q,X]=(0,l.useState)("overview"),[ee,es]=(0,l.useState)([]),[ea,et]=(0,l.useState)([]),[el,er]=(0,l.useState)([]);(0,l.useEffect)(()=>{i&&(ei(),ec())},[i]);let ei=async()=>{try{R(null),V(!0);let e=await fetch("/api/properties/".concat(i)),s=await e.json();if(!e.ok)throw Error(s.error||"Ошибка при загрузке объекта");if(s.success)O(s.data);else throw Error(s.error||"Ошибка при загрузке объекта")}catch(e){console.error("Error fetching property:",e),R(e instanceof Error?e.message:"Ошибка при загрузке объекта")}finally{V(!1)}},ec=async()=>{try{let e=await fetch("/api/deals?propertyId=".concat(i));if(e.ok){let s=await e.json();es(s.data||[])}let s=await fetch("/api/contracts?propertyId=".concat(i));if(s.ok){let e=await s.json();et(e.data||[])}let a=await fetch("/api/payments?propertyId=".concat(i));if(a.ok){let e=await a.json();er(e.data||[])}}catch(e){console.error("Error fetching related data:",e)}},en=async()=>{try{Y(!0);let e=await fetch("/api/properties/".concat(i),{method:"DELETE"});if(e.ok)a.push("/properties");else{let s=await e.json();throw Error(s.error||"Ошибка при удалении")}}catch(e){console.error("Error deleting property:",e),R(e instanceof Error?e.message:"Ошибка при удалении")}finally{Y(!1),F(!1)}},ed=async()=>{try{let e=await fetch("/api/properties/".concat(i),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...m,status:"MAINTENANCE"})});if(e.ok)await ei(),U(!1);else{let s=await e.json();throw Error(s.error||"Ошибка при архивировании")}}catch(e){console.error("Error archiving property:",e),R(e instanceof Error?e.message:"Ошибка при архивировании")}};return q?(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Загрузка объекта..."})]})}):D?(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center max-w-md",children:[(0,t.jsx)(d.A,{className:"h-16 w-16 text-red-500 mx-auto mb-4"}),(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Ошибка загрузки"}),(0,t.jsx)("p",{className:"text-gray-600 mb-6",children:D}),(0,t.jsxs)("div",{className:"space-x-4",children:[(0,t.jsxs)(n.Pd,{onClick:ei,children:[(0,t.jsx)(x.A,{className:"h-4 w-4 mr-2"}),"Попробовать снова"]}),(0,t.jsxs)(n.Pd,{variant:"outline",onClick:()=>a.push("/properties"),children:[(0,t.jsx)(h.A,{className:"h-4 w-4 mr-2"}),"Назад к списку"]})]})]})}):m?(0,t.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,t.jsx)("div",{className:"mb-8",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsx)(c(),{href:"/properties",children:(0,t.jsxs)(n.Pd,{variant:"outline",size:"sm",children:[(0,t.jsx)(h.A,{className:"h-4 w-4 mr-2"}),"Назад"]})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:m.title}),(0,t.jsx)("p",{className:"text-gray-600",children:m.address})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(e=>{let s={AVAILABLE:{label:"Доступен",variant:"success"},RENTED:{label:"Сдан",variant:"primary"},MAINTENANCE:{label:"На обслуживании",variant:"warning"},DRAFT:{label:"Черновик",variant:"default"}},a=s[e]||s.DRAFT;return(0,t.jsx)(n.a,{variant:a.variant,children:a.label})})(m.status),(0,t.jsxs)(n.Pd,{variant:"outline",onClick:()=>a.push("/properties/".concat(i,"/edit")),children:[(0,t.jsx)(o.A,{className:"h-4 w-4 mr-2"}),"Редактировать"]}),(0,t.jsxs)(n.Pd,{variant:"outline",onClick:()=>U(!0),children:[(0,t.jsx)(j,{className:"h-4 w-4 mr-2"}),"Архивировать"]}),(0,t.jsxs)(n.Pd,{variant:"outline",onClick:()=>{console.log("Clone property:",i)},children:[(0,t.jsx)(p,{className:"h-4 w-4 mr-2"}),"Клонировать"]}),(0,t.jsxs)(n.Pd,{variant:"danger",onClick:()=>F(!0),children:[(0,t.jsx)(y.A,{className:"h-4 w-4 mr-2"}),"Удалить"]})]})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,t.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[m.images&&m.images.length>0?(0,t.jsx)(n.zk,{className:"p-0 overflow-hidden",children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("img",{src:null==(e=m.images[_])?void 0:e.url,alt:m.title,className:"w-full h-96 object-cover"}),m.images.length>1&&(0,t.jsx)("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 flex space-x-2",children:m.images.map((e,s)=>(0,t.jsx)("button",{onClick:()=>B(s),className:"w-3 h-3 rounded-full ".concat(s===_?"bg-white":"bg-white/50")},s))})]})}):(0,t.jsx)(n.zk,{className:"h-96 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center text-gray-500",children:[(0,t.jsx)(u.A,{className:"h-16 w-16 mx-auto mb-4"}),(0,t.jsx)("p",{children:"Изображения не загружены"})]})}),(0,t.jsxs)(n.zk,{children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Основная информация"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(N.A,{className:"h-5 w-5 text-gray-400 mr-3"}),(0,t.jsx)("span",{className:"text-gray-600",children:m.address})]}),(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(v.A,{className:"h-5 w-5 text-gray-400 mr-3"}),(0,t.jsxs)("span",{className:"text-gray-600",children:[(0,z.$g)(m.pricePerMonth),"/мес"]})]}),(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(g,{className:"h-5 w-5 text-gray-400 mr-3"}),(0,t.jsxs)("span",{className:"text-gray-600",children:[(0,z.Jd)(m.area)," м\xb2"]})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(f,{className:"h-5 w-5 text-gray-400 mr-3"}),(0,t.jsxs)("span",{className:"text-gray-600",children:[m.bedrooms||0," спален"]})]}),(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(b,{className:"h-5 w-5 text-gray-400 mr-3"}),(0,t.jsxs)("span",{className:"text-gray-600",children:[m.bathrooms||0," ванных"]})]}),(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(w.A,{className:"h-5 w-5 text-gray-400 mr-3"}),(0,t.jsxs)("span",{className:"text-gray-600",children:["Добавлен ",(0,z.Yq)(m.createdAt)]})]})]})]})]}),m.description&&(0,t.jsxs)(n.zk,{children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Описание"}),(0,t.jsx)("p",{className:"text-gray-600 whitespace-pre-wrap",children:m.description})]}),m.amenities&&m.amenities.length>0&&(0,t.jsxs)(n.zk,{children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Удобства"}),(0,t.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:m.amenities.map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("span",{children:L[e]||"✅"}),(0,t.jsx)("span",{className:"text-gray-600",children:e})]},s))})]})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)(n.zk,{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Быстрые действия"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)(n.Pd,{onClick:()=>$(!0),className:"w-full justify-center",children:[(0,t.jsx)(k.A,{className:"h-4 w-4 mr-2"}),"Создать сделку"]}),(0,t.jsxs)(n.Pd,{variant:"outline",onClick:()=>a.push("/contracts/new?propertyId=".concat(i)),className:"w-full justify-center",children:[(0,t.jsx)(A.A,{className:"h-4 w-4 mr-2"}),"Создать договор"]}),(0,t.jsxs)(n.Pd,{variant:"outline",onClick:()=>K(!0),className:"w-full justify-center",children:[(0,t.jsx)(C.A,{className:"h-4 w-4 mr-2"}),"Платежный план"]}),(0,t.jsxs)(n.Pd,{variant:"outline",onClick:()=>a.push("/scoring?propertyId=".concat(i)),className:"w-full justify-center",children:[(0,t.jsx)(S.A,{className:"h-4 w-4 mr-2"}),"Скоринг"]})]})]}),m.owner&&(0,t.jsxs)(n.zk,{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Владелец"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(E.A,{className:"h-5 w-5 text-gray-400 mr-3"}),(0,t.jsxs)("span",{className:"text-gray-600",children:[m.owner.firstName," ",m.owner.lastName]})]}),(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(P.A,{className:"h-5 w-5 text-gray-400 mr-3"}),(0,t.jsx)("span",{className:"text-gray-600",children:m.owner.phone})]}),(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(M.A,{className:"h-5 w-5 text-gray-400 mr-3"}),(0,t.jsx)("span",{className:"text-gray-600",children:m.owner.email})]})]})]}),(0,t.jsxs)(n.zk,{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Статистика"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Сделок:"}),(0,t.jsx)("span",{className:"font-semibold",children:ee.length})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Договоров:"}),(0,t.jsx)("span",{className:"font-semibold",children:ea.length})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Платежей:"}),(0,t.jsx)("span",{className:"font-semibold",children:el.length})]})]})]})]})]}),(0,t.jsx)(T.A,{isOpen:Z,onClose:()=>$(!1),onSuccess:()=>{$(!1),ec()}}),(0,t.jsx)(I.A,{isOpen:G,onClose:()=>K(!1),onSuccess:()=>{K(!1),ec()},deals:ee,contracts:ea}),H&&(0,t.jsx)(n.ih,{isOpen:H,onClose:()=>F(!1),title:"Удалить объект",size:"md",footer:(0,t.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,t.jsx)(n.Pd,{variant:"outline",onClick:()=>F(!1),children:"Отмена"}),(0,t.jsx)(n.Pd,{variant:"danger",onClick:en,loading:W,children:"Удалить"})]}),children:(0,t.jsxs)("p",{children:['Вы уверены, что хотите удалить объект "',m.title,'"? Это действие нельзя отменить.']})}),J&&(0,t.jsx)(n.ih,{isOpen:J,onClose:()=>U(!1),title:"Архивировать объект",size:"md",footer:(0,t.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,t.jsx)(n.Pd,{variant:"outline",onClick:()=>U(!1),children:"Отмена"}),(0,t.jsx)(n.Pd,{variant:"outline",onClick:ed,children:"Архивировать"})]}),children:(0,t.jsxs)("p",{children:['Объект "',m.title,'" будет перемещен в архив. Вы сможете восстановить его позже.']})})]})}):(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Объект не найден"}),(0,t.jsx)("p",{className:"text-gray-600 mb-6",children:"Запрашиваемый объект не существует или был удален"}),(0,t.jsxs)(n.Pd,{onClick:()=>a.push("/properties"),children:[(0,t.jsx)(h.A,{className:"h-4 w-4 mr-2"}),"Назад к списку"]})]})})}},28883:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(72895).A)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},34576:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(72895).A)("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},35063:(e,s,a)=>{Promise.resolve().then(a.bind(a,21342))},62525:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(72895).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},90490:(e,s,a)=>{"use strict";a.d(s,{A:()=>n});var t=a(95155),l=a(12115),r=a(41665),i=a(57434),c=a(27414);function n(e){var s,a,n,d,x,h;let{isOpen:o,onClose:m,onSuccess:j,deals:p=[],contracts:y=[]}=e,[u,N]=(0,l.useState)(!1),[v,g]=(0,l.useState)([]),[f,b]=(0,l.useState)(""),[w,k]=(0,l.useState)("deal"),[A,C]=(0,l.useState)(""),[S,E]=(0,l.useState)(p),[P,M]=(0,l.useState)(y);(0,l.useEffect)(()=>{o&&(z(),T())},[o]);let z=async()=>{try{let e=await fetch("/api/deals"),s=await e.json();s.success&&E(s.data)}catch(e){console.error("Error loading deals:",e)}},T=async()=>{try{let e=await fetch("/api/contracts"),s=await e.json();s.success&&M(s.data)}catch(e){console.error("Error loading contracts:",e)}},I=async e=>{e.preventDefault(),N(!0),g([]),b("");try{let e=await fetch("/api/payments/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({dealId:"deal"===w?A:void 0,contractId:"contract"===w?A:void 0})}),s=await e.json();s.success?(b(s.message||"Платежи успешно сгенерированы"),setTimeout(()=>{b(""),m(),j()},2e3)):g([s.error||"Ошибка при генерации платежей"])}catch(e){console.error("Error generating payments:",e),g(["Ошибка при генерации платежей"])}finally{N(!1)}},L="deal"===w?S.find(e=>e.id===A):null==(s=P.find(e=>e.id===A))?void 0:s.deal;return(0,t.jsx)(r.ih,{isOpen:o,onClose:m,title:"Генерация платежей",children:(0,t.jsxs)("form",{onSubmit:I,className:"space-y-6",children:[v.length>0&&(0,t.jsx)(r.N6,{variant:"error",title:"Ошибка",children:(0,t.jsx)("ul",{className:"list-disc list-inside",children:v.map((e,s)=>(0,t.jsx)("li",{children:e},s))})}),f&&(0,t.jsx)(r.N6,{variant:"success",title:"Успешно",children:f}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("h3",{className:"text-lg font-medium text-[#323130] mb-4 flex items-center",children:[(0,t.jsx)(i.A,{className:"w-5 h-5 mr-2"}),"Выбор источника данных"]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-[#323130] mb-1",children:"Тип сущности"}),(0,t.jsx)(r.H1,{value:w,onChange:e=>{k(e),C("")},options:[{value:"deal",label:"Сделка"},{value:"contract",label:"Договор"}]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-[#323130] mb-1",children:["Выберите ","deal"===w?"сделку":"договор"]}),(0,t.jsx)(r.H1,{value:A,onChange:C,options:"deal"===w?[{value:"",label:"Выберите сделку"},...S.map(e=>{var s;return{value:e.id,label:"".concat(e.title," (").concat(null==(s=e.monthlyRent)?void 0:s.toLocaleString()," ₽/мес)")}})]:[{value:"",label:"Выберите договор"},...P.map(e=>{var s;return{value:e.id,label:"".concat(e.title," (").concat(null==(s=e.deal.monthlyRent)?void 0:s.toLocaleString()," ₽/мес)")}})]})]})]})]}),L&&(0,t.jsxs)("div",{children:[(0,t.jsxs)("h3",{className:"text-lg font-medium text-[#323130] mb-4 flex items-center",children:[(0,t.jsx)(c.A,{className:"w-5 h-5 mr-2"}),"Информация для генерации"]}),(0,t.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg space-y-2 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"Объект:"})," ",null==(a=L.property)?void 0:a.title," - ",null==(n=L.property)?void 0:n.address]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"Арендатор:"})," ",null==(d=L.tenant)?void 0:d.firstName," ",null==(x=L.tenant)?void 0:x.lastName]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"Сумма аренды:"})," ",null==(h=L.monthlyRent)?void 0:h.toLocaleString()," ₽/мес"]}),L.deposit&&(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"Залог:"})," ",L.deposit.toLocaleString()," ₽"]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"Период:"})," ",L.startDate," - ",L.endDate||"неопределенный срок"]})]}),(0,t.jsxs)("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg",children:[(0,t.jsx)("h4",{className:"font-medium text-blue-900 mb-2",children:"Будет сгенерировано:"}),(0,t.jsxs)("ul",{className:"text-sm text-blue-800 space-y-1",children:[(0,t.jsx)("li",{children:"• Ежемесячные платежи за аренду (5-е число каждого месяца)"}),L.deposit&&(0,t.jsx)("li",{children:"• Платеж за залог (в день начала аренды)"}),(0,t.jsxs)("li",{children:["• Все платежи будут привязаны к ","deal"===w?"сделке":"договору"]})]})]})]}),(0,t.jsxs)("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[(0,t.jsx)(r.Pd,{type:"button",variant:"outline",onClick:m,disabled:u,children:"Отмена"}),(0,t.jsx)(r.Pd,{type:"submit",disabled:u||!A,children:u?"Генерация...":"Сгенерировать платежи"})]})]})})}}},e=>{e.O(0,[7910,1665,4040,8441,5964,7358],()=>e(e.s=35063)),_N_E=e.O()}]);