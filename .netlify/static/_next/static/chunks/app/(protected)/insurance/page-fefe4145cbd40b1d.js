(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9543],{4621:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(72895).A)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]])},14186:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(72895).A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},15313:(e,s,t)=>{"use strict";t.d(s,{O:()=>h});var a=t(95155),l=t(12115),r=t(35695),i=t(54789),c=t(6874),n=t.n(c),d=t(41665),m=t(32919),x=t(92138);function o(e){let{title:s="Требуется авторизация",message:t="Для доступа к этой странице необходимо войти в систему",showRegisterLink:l=!0}=e;return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)("div",{className:"w-12 h-12 bg-primary-600 rounded-lg flex items-center justify-center",children:(0,a.jsx)(m.A,{className:"w-8 h-8 text-white"})})}),(0,a.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:s}),(0,a.jsx)("p",{className:"mt-2 text-center text-sm text-gray-600",children:t})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(n(),{href:"/login",className:"w-full",children:(0,a.jsxs)(d.Pd,{className:"w-full",children:["Войти в систему",(0,a.jsx)(x.A,{className:"w-4 h-4 ml-2"})]})}),l&&(0,a.jsx)("div",{className:"text-center",children:(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Нет аккаунта?"," ",(0,a.jsx)(n(),{href:"/register",className:"font-medium text-primary-600 hover:text-primary-500",children:"Зарегистрироваться"})]})})]})]})})}function h(e){let{children:s,fallback:t,title:c,message:n}=e,{user:d,loading:m,isAuthenticated:x}=(0,i.n)(),h=(0,r.useRouter)();return((0,l.useEffect)(()=>{m||x||(console.log("\uD83D\uDEE1️ Попытка доступа к защищенной странице без авторизации"),h.push("/login"))},[m,x,h]),m)?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),(0,a.jsx)("p",{className:"mt-4 text-gray-600",children:"Проверка авторизации..."})]})}):x?(0,a.jsx)(a.Fragment,{children:s}):t?(0,a.jsx)(a.Fragment,{children:t}):(0,a.jsx)(o,{title:c,message:n})}},18533:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(72895).A)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},19420:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(72895).A)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},22915:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(72895).A)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},27414:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(72895).A)("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]])},32919:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(72895).A)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},38564:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(72895).A)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]])},62525:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(72895).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},66328:(e,s,t)=>{Promise.resolve().then(t.bind(t,74015))},74015:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>F});var a=t(95155),l=t(12115),r=t(23227),i=t(17580),c=t(81586),n=t(57434),d=t(75525),m=t(14186),x=t(27414),o=t(38564);let h=(0,t(72895).A)("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);var u=t(84616),j=t(22915),p=t(92138),y=t(19420),N=t(6740),g=t(41665),v=t(15313),b=t(18533);let f=[{value:"PROPERTY",label:"Страхование имущества",description:"Защита объектов недвижимости от повреждений",icon:r.A},{value:"LIABILITY",label:"Страхование ответственности",description:"Защита от претензий арендаторов",icon:i.A},{value:"RENTAL_INCOME",label:"Страхование арендных платежей",description:"Защита от невыплаты арендной платы",icon:c.A},{value:"LEGAL_PROTECTION",label:"Юридическая защита",description:"Покрытие расходов на юридические услуги",icon:n.A},{value:"COMPREHENSIVE",label:"Комплексное страхование",description:"Полная защита по всем направлениям",icon:d.A}],A=[{value:"APARTMENT",label:"Квартира"},{value:"HOUSE",label:"Дом"},{value:"COMMERCIAL",label:"Коммерческая недвижимость"},{value:"LAND",label:"Земельный участок"}],w=[{value:"center",label:"Центр города"},{value:"residential",label:"Спальный район"},{value:"outskirts",label:"Окраина города"}],k=[{value:"Росгосстрах",label:"Росгосстрах"},{value:"АльфаСтрахование",label:"АльфаСтрахование"},{value:"Сбербанк Страхование",label:"Сбербанк Страхование"},{value:"ВТБ Страхование",label:"ВТБ Страхование"}];function E(e){let{onSuccess:s,onCancel:t,initialData:r}=e,[i,c]=(0,l.useState)({type:"",insuredAmount:"",deductible:"",premium:"",startDate:"",endDate:"",insuranceCompany:"",propertyId:"",propertyType:"",propertyAge:"",location:"",coveragePeriod:"12"}),[n,m]=(0,l.useState)(null),[x,o]=(0,l.useState)(!1),[h,u]=(0,l.useState)("");(0,l.useEffect)(()=>{r&&c(e=>({...e,...r}))},[r]);let j=(e,s)=>{c(t=>({...t,[e]:s}))},p=async()=>{if(!i.type||!i.insuredAmount||!i.propertyType||!i.location)return void u("Заполните все обязательные поля для расчета");o(!0),u("");try{let e=await fetch("/api/insurance/calculate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:i.type,insuredAmount:parseFloat(i.insuredAmount),propertyType:i.propertyType,propertyAge:parseInt(i.propertyAge)||10,location:i.location,coveragePeriod:parseInt(i.coveragePeriod)})});if(!e.ok)throw Error("Ошибка расчета");let s=await e.json();m(s),c(e=>({...e,premium:s.calculation.premium.toString(),deductible:s.calculation.deductible.toString()}))}catch(e){u("Ошибка при расчете стоимости страхования")}finally{o(!1)}},y=async e=>{if(e.preventDefault(),!i.type||!i.insuredAmount||!i.premium)return void u("Заполните все обязательные поля");o(!0),u("");try{let e=await fetch("/api/insurance/policies",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:i.type,insuredAmount:parseFloat(i.insuredAmount),deductible:parseFloat(i.deductible),premium:parseFloat(i.premium),startDate:i.startDate,endDate:i.endDate,insuranceCompany:i.insuranceCompany,propertyId:i.propertyId||null})});if(!e.ok)throw Error("Ошибка создания полиса");let t=await e.json();null==s||s(t)}catch(e){u("Ошибка при создании страхового полиса")}finally{o(!1)}};return(0,a.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,a.jsxs)(g.zk,{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center mb-6",children:[(0,a.jsx)(d.A,{className:"w-6 h-6 text-primary-600 mr-2"}),(0,a.jsx)("h2",{className:"text-2xl font-semibold text-gray-900",children:r?"Редактировать полис":"Создать страховой полис"})]}),h&&(0,a.jsxs)(g.N6,{variant:"error",className:"mb-6",children:[(0,a.jsx)(b.A,{className:"w-4 h-4"}),h]}),(0,a.jsxs)("form",{onSubmit:y,className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Тип страхования *"}),(0,a.jsx)(g.H1,{value:i.type,onValueChange:e=>j("type",e),placeholder:"Выберите тип страхования",children:f.map(e=>(e.icon,(0,a.jsx)("option",{value:e.value,children:e.label},e.value)))})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Тип недвижимости"}),(0,a.jsx)(g.H1,{value:i.propertyType,onValueChange:e=>j("propertyType",e),placeholder:"Выберите тип",children:A.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Возраст недвижимости (лет)"}),(0,a.jsx)(g.V$,{type:"number",value:i.propertyAge,onChange:e=>j("propertyAge",e.target.value),placeholder:"10"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Расположение"}),(0,a.jsx)(g.H1,{value:i.location,onValueChange:e=>j("location",e),placeholder:"Выберите район",children:w.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Страховая сумма (₽) *"}),(0,a.jsx)(g.V$,{type:"number",value:i.insuredAmount,onChange:e=>j("insuredAmount",e.target.value),placeholder:"1000000",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Период страхования (месяцев)"}),(0,a.jsx)(g.V$,{type:"number",value:i.coveragePeriod,onChange:e=>j("coveragePeriod",e.target.value),placeholder:"12",min:"1",max:"60"})]}),(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsxs)(g.Pd,{type:"button",onClick:p,disabled:x||!i.type||!i.insuredAmount,className:"flex items-center",children:[(0,a.jsx)(N.A,{className:"w-4 h-4 mr-2"}),x?"Рассчитываем...":"Рассчитать стоимость"]})}),n&&(0,a.jsxs)(g.zk,{className:"p-4 bg-blue-50 border-blue-200",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-blue-900 mb-3",children:"Результаты расчета"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-blue-700 mb-1",children:"Премия (₽)"}),(0,a.jsx)(g.V$,{type:"number",value:i.premium,onChange:e=>j("premium",e.target.value),className:"bg-white"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-blue-700 mb-1",children:"Франшиза (₽)"}),(0,a.jsx)(g.V$,{type:"number",value:i.deductible,onChange:e=>j("deductible",e.target.value),className:"bg-white"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-blue-700 mb-1",children:"Период"}),(0,a.jsxs)("div",{className:"text-blue-900 font-medium",children:[n.calculation.period," месяцев"]})]})]}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-blue-700 mb-2",children:"Предложения страховых компаний:"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:n.companies.map((e,s)=>(0,a.jsxs)("div",{className:"p-2 bg-white rounded border cursor-pointer hover:border-blue-300",onClick:()=>j("insuranceCompany",e.name),children:[(0,a.jsx)("div",{className:"font-medium text-sm",children:e.name}),(0,a.jsxs)("div",{className:"text-xs text-gray-600",children:[Math.round(e.premium)," ₽ • Рейтинг: ",e.rating]})]},s))})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Дата начала действия"}),(0,a.jsx)(g.FN,{value:i.startDate,onChange:e=>j("startDate",e),placeholder:"Выберите дату"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Дата окончания действия"}),(0,a.jsx)(g.FN,{value:i.endDate,onChange:e=>j("endDate",e),placeholder:"Выберите дату"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Страховая компания"}),(0,a.jsx)(g.H1,{value:i.insuranceCompany,onValueChange:e=>j("insuranceCompany",e),placeholder:"Выберите страховую компанию",children:k.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-4 pt-6",children:[t&&(0,a.jsx)(g.Pd,{type:"button",variant:"outline",onClick:t,disabled:x,children:"Отмена"}),(0,a.jsx)(g.Pd,{type:"submit",disabled:x||!i.type||!i.insuredAmount||!i.premium,children:x?"Создаем...":r?"Обновить":"Создать полис"})]})]})]})})}var C=t(10809),T=t(92657),P=t(4621),D=t(62525),R=t(91788);let I=e=>{switch(e){case"ACTIVE":return"success";case"DRAFT":case"PENDING_PAYMENT":return"warning";case"EXPIRED":case"CANCELLED":return"error";default:return"default"}},S=e=>{switch(e){case"ACTIVE":return"Активен";case"DRAFT":return"Черновик";case"PENDING_PAYMENT":return"Ожидает оплаты";case"EXPIRED":return"Истек";case"CANCELLED":return"Отменен";default:return e}},L=e=>{switch(e){case"PROPERTY":return"Имущество";case"LIABILITY":return"Ответственность";case"RENTAL_INCOME":return"Арендные платежи";case"LEGAL_PROTECTION":return"Юридическая защита";case"COMPREHENSIVE":return"Комплексное";default:return e}};function M(e){let{onEdit:s,onDelete:t,onPay:o}=e,[h,u]=(0,l.useState)([]),[p,y]=(0,l.useState)(!0),[N,v]=(0,l.useState)(""),[b,f]=(0,l.useState)(null),[A,w]=(0,l.useState)(!1);(0,l.useEffect)(()=>{k()},[]);let k=async()=>{try{let e=await fetch("/api/insurance/policies");if(!e.ok)throw Error("Ошибка загрузки полисов");let s=await e.json();u(s)}catch(e){v("Ошибка при загрузке страховых полисов")}finally{y(!1)}},E=async e=>{if(confirm("Вы уверены, что хотите удалить этот полис?"))try{if(!(await fetch("/api/insurance/policies/".concat(e),{method:"DELETE"})).ok)throw Error("Ошибка удаления");u(s=>s.filter(s=>s.id!==e)),null==t||t(e)}catch(e){v("Ошибка при удалении полиса")}},M=async e=>{try{if(!(await fetch("/api/insurance/policies/".concat(e.id,"/pay"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({paymentMethod:"CARD",transactionId:"TXN-".concat(Date.now())})})).ok)throw Error("Ошибка оплаты");await k(),null==o||o(e)}catch(e){v("Ошибка при оплате полиса")}},z=e=>new Date(e).toLocaleDateString("ru-RU"),O=e=>new Intl.NumberFormat("ru-RU",{style:"currency",currency:"RUB"}).format(e),V=e=>{let s=new Date(e),t=new Date,a=Math.ceil((s.getTime()-t.getTime())/864e5);return a<=30&&a>0};return p?(0,a.jsx)("div",{className:"flex justify-center items-center py-8",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):N?(0,a.jsxs)(g.N6,{variant:"error",className:"mb-6",children:[(0,a.jsx)(C.A,{className:"w-4 h-4"}),N]}):0===h.length?(0,a.jsxs)(g.zk,{className:"p-8 text-center",children:[(0,a.jsx)(d.A,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Нет страховых полисов"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"У вас пока нет оформленных страховых полисов"}),(0,a.jsx)(g.Pd,{onClick:()=>window.location.href="/insurance/new",children:"Создать первый полис"})]}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,a.jsx)(g.zk,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(d.A,{className:"w-8 h-8 text-blue-600 mr-3"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:h.length}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Всего полисов"})]})]})}),(0,a.jsx)(g.zk,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(j.A,{className:"w-8 h-8 text-green-600 mr-3"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:h.filter(e=>"ACTIVE"===e.status).length}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Активных"})]})]})}),(0,a.jsx)(g.zk,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(m.A,{className:"w-8 h-8 text-orange-600 mr-3"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:h.filter(e=>V(e.endDate)).length}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Истекают скоро"})]})]})}),(0,a.jsx)(g.zk,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(x.A,{className:"w-8 h-8 text-purple-600 mr-3"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:O(h.reduce((e,s)=>e+s.premium,0))}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Общая премия"})]})]})})]}),(0,a.jsx)("div",{className:"space-y-4",children:h.map(e=>{let t=(e=>{switch(e){case"PROPERTY":return r.A;case"LIABILITY":return i.A;case"RENTAL_INCOME":return c.A;case"LEGAL_PROTECTION":return n.A;default:return d.A}})(e.type),l=V(e.endDate),m=new Date(e.endDate)<new Date;return(0,a.jsx)(g.zk,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,a.jsx)(t,{className:"w-6 h-6 text-blue-600"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:e.policyNumber}),(0,a.jsx)(g.a,{variant:I(e.status),children:S(e.status)}),l&&!m&&(0,a.jsx)(g.a,{variant:"warning",children:"Истекает скоро"}),m&&(0,a.jsx)(g.a,{variant:"error",children:"Истек"})]}),(0,a.jsxs)("p",{className:"text-gray-600 mb-2",children:[L(e.type)," • ",e.insuranceCompany]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Страховая сумма:"}),(0,a.jsx)("div",{className:"font-medium",children:O(e.insuredAmount)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Премия:"}),(0,a.jsx)("div",{className:"font-medium",children:O(e.premium)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Действует до:"}),(0,a.jsx)("div",{className:"font-medium",children:z(e.endDate)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Франшиза:"}),(0,a.jsx)("div",{className:"font-medium",children:O(e.deductible)})]})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(g.Pd,{size:"sm",variant:"outline",onClick:()=>{f(e),w(!0)},children:(0,a.jsx)(T.A,{className:"w-4 h-4"})}),"DRAFT"===e.status&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(g.Pd,{size:"sm",variant:"outline",onClick:()=>null==s?void 0:s(e),children:(0,a.jsx)(P.A,{className:"w-4 h-4"})}),(0,a.jsx)(g.Pd,{size:"sm",variant:"outline",onClick:()=>E(e.id),children:(0,a.jsx)(D.A,{className:"w-4 h-4"})})]}),"PENDING_PAYMENT"===e.status&&(0,a.jsxs)(g.Pd,{size:"sm",onClick:()=>M(e),children:[(0,a.jsx)(c.A,{className:"w-4 h-4 mr-1"}),"Оплатить"]}),"ACTIVE"===e.status&&(0,a.jsxs)(g.Pd,{size:"sm",variant:"outline",children:[(0,a.jsx)(R.A,{className:"w-4 h-4 mr-1"}),"Скачать"]})]})]})},e.id)})}),(0,a.jsx)(g.ih,{isOpen:A,onClose:()=>w(!1),title:"Детали страхового полиса",children:b&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Номер полиса"}),(0,a.jsx)("div",{className:"text-sm",children:b.policyNumber})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Тип страхования"}),(0,a.jsx)("div",{className:"text-sm",children:L(b.type)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Страховая компания"}),(0,a.jsx)("div",{className:"text-sm",children:b.insuranceCompany})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Статус"}),(0,a.jsx)("div",{className:"text-sm",children:(0,a.jsx)(g.a,{variant:I(b.status),children:S(b.status)})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Страховая сумма"}),(0,a.jsx)("div",{className:"text-sm",children:O(b.insuredAmount)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Премия"}),(0,a.jsx)("div",{className:"text-sm",children:O(b.premium)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Франшиза"}),(0,a.jsx)("div",{className:"text-sm",children:O(b.deductible)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Дата начала"}),(0,a.jsx)("div",{className:"text-sm",children:z(b.startDate)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Дата окончания"}),(0,a.jsx)("div",{className:"text-sm",children:z(b.endDate)})]})]}),b.property&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Объект недвижимости"}),(0,a.jsx)("div",{className:"text-sm",children:b.property.title})]}),b.payments&&b.payments.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"История платежей"}),(0,a.jsx)("div",{className:"space-y-2",children:b.payments.map(e=>(0,a.jsxs)("div",{className:"text-sm bg-gray-50 p-2 rounded",children:[O(e.amount)," - ",z(e.paidAt||e.createdAt)]},e.id))})]})]})})]})}var z=t(54416);function O(){let[e,s]=(0,l.useState)([]),[t,r]=(0,l.useState)(!0),[i,c]=(0,l.useState)(!1);(0,l.useEffect)(()=>{n()},[]);let n=async()=>{try{let e=await fetch("/api/insurance/notifications/expiring");if(e.ok){let t=await e.json();s(t)}}catch(e){console.error("Error fetching expiring policies:",e)}finally{r(!1)}};return t||0===e.length||i?null:(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsx)(g.N6,{variant:"warning",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex items-start",children:[(0,a.jsx)(C.A,{className:"w-5 h-5 text-orange-600 mr-3 mt-0.5"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-orange-800 mb-2",children:"Полисы страхования истекают"}),(0,a.jsxs)("div",{className:"space-y-2",children:[e.slice(0,3).map(e=>{let s=(e=>{let s=new Date(e),t=new Date;return Math.ceil((s.getTime()-t.getTime())/864e5)})(e.endDate);return(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(d.A,{className:"w-4 h-4 text-orange-600 mr-2"}),(0,a.jsxs)("span",{className:"text-orange-700",children:[e.policyNumber," - истекает через ",s," дней"]})]}),(0,a.jsxs)(g.Pd,{size:"sm",variant:"outline",onClick:()=>window.location.href="/insurance?tab=policies",children:["Продлить",(0,a.jsx)(p.A,{className:"w-3 h-3 ml-1"})]})]},e.id)}),e.length>3&&(0,a.jsxs)("div",{className:"text-sm text-orange-700",children:["И еще ",e.length-3," полисов..."]})]})]})]}),(0,a.jsx)("button",{onClick:()=>c(!0),className:"text-orange-600 hover:text-orange-800",children:(0,a.jsx)(z.A,{className:"w-4 h-4"})})]})})})}let V=[{id:"property",title:"Страхование имущества",description:"Защита объектов недвижимости от повреждений, кражи и стихийных бедствий",icon:r.A,color:"blue",features:["Покрытие ущерба от пожара","Защита от затопления","Кража и грабеж","Стихийные бедствия","Вандализм"],price:"от 2,000 ₽/год",coverage:"до 5,000,000 ₽"},{id:"liability",title:"Страхование ответственности",description:"Защита от претензий арендаторов и третьих лиц",icon:i.A,color:"green",features:["Ответственность перед арендаторами","Повреждение имущества третьих лиц","Медицинские расходы","Юридическая защита","Компенсация морального вреда"],price:"от 1,500 ₽/год",coverage:"до 3,000,000 ₽"},{id:"rental",title:"Страхование арендных платежей",description:"Защита от невыплаты арендной платы и связанных расходов",icon:c.A,color:"purple",features:["Невыплата арендной платы","Расходы на выселение","Потеря дохода","Юридические услуги","Восстановление имущества"],price:"от 3,000 ₽/год",coverage:"до 12 месяцев аренды"},{id:"legal",title:"Юридическая защита",description:"Покрытие расходов на юридические услуги при спорах с арендаторами",icon:n.A,color:"orange",features:["Консультации юристов","Представительство в суде","Составление документов","Досудебное урегулирование","Обжалование решений"],price:"от 5,000 ₽/год",coverage:"до 500,000 ₽"}],_=[{icon:d.A,title:"Надежная защита",description:"Покрытие всех основных рисков арендодателя"},{icon:m.A,title:"Быстрое оформление",description:"Оформление полиса за 15 минут онлайн"},{icon:x.A,title:"Доступные цены",description:"Конкурентные тарифы от ведущих страховщиков"},{icon:o.A,title:"Качественный сервис",description:"Поддержка 24/7 и быстрое урегулирование убытков"}];function F(){let[e,s]=(0,l.useState)(null),[t,r]=(0,l.useState)("overview"),[i,c]=(0,l.useState)(!1),[n,m]=(0,l.useState)(null);return(0,a.jsx)(v.O,{children:(0,a.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsx)("div",{className:"flex justify-center mb-4",children:(0,a.jsx)("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center",children:(0,a.jsx)(d.A,{className:"w-8 h-8 text-red-600"})})}),(0,a.jsx)("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Страхование недвижимости"}),(0,a.jsx)("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Комплексная защита ваших объектов недвижимости и интересов как арендодателя"})]}),(0,a.jsx)(O,{}),(0,a.jsx)("div",{className:"mb-8",children:(0,a.jsx)(g.RE,{value:t,onValueChange:r,children:(0,a.jsxs)(g.RE.List,{children:[(0,a.jsxs)(g.RE.Trigger,{value:"overview",className:"flex items-center",children:[(0,a.jsx)(h,{className:"w-4 h-4 mr-2"}),"Обзор"]}),(0,a.jsxs)(g.RE.Trigger,{value:"policies",className:"flex items-center",children:[(0,a.jsx)(d.A,{className:"w-4 h-4 mr-2"}),"Мои полисы"]}),(0,a.jsxs)(g.RE.Trigger,{value:"form",className:"flex items-center",children:[(0,a.jsx)(u.A,{className:"w-4 h-4 mr-2"}),"Новый полис"]})]})})}),(0,a.jsxs)(g.RE.Content,{value:"overview",children:[(0,a.jsxs)("div",{className:"mb-12",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold text-gray-900 mb-6 text-center",children:"Почему стоит застраховаться?"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:_.map((e,s)=>{let t=e.icon;return(0,a.jsxs)(g.zk,{className:"text-center p-6",children:[(0,a.jsx)("div",{className:"flex justify-center mb-4",children:(0,a.jsx)(t,{className:"w-8 h-8 text-primary-600"})}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:e.title}),(0,a.jsx)("p",{className:"text-gray-600",children:e.description})]},s)})})]}),(0,a.jsxs)("div",{className:"mb-12",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold text-gray-900 mb-6 text-center",children:"Виды страхования"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:V.map(e=>{let s=e.icon;return(0,a.jsxs)(g.zk,{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-start mb-4",children:[(0,a.jsx)("div",{className:"w-12 h-12 ".concat((e=>{switch(e){case"blue":return"bg-blue-50 border-blue-200 text-blue-700";case"green":return"bg-green-50 border-green-200 text-green-700";case"purple":return"bg-purple-50 border-purple-200 text-purple-700";case"orange":return"bg-orange-50 border-orange-200 text-orange-700";default:return"bg-gray-50 border-gray-200 text-gray-700"}})(e.color)," rounded-lg flex items-center justify-center"),children:(0,a.jsx)(s,{className:"w-6 h-6"})}),(0,a.jsxs)("div",{className:"ml-4 flex-1",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:e.title}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:e.description}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center text-green-600",children:[(0,a.jsx)(x.A,{className:"w-4 h-4 mr-1"}),e.price]}),(0,a.jsxs)("div",{className:"flex items-center text-blue-600",children:[(0,a.jsx)(d.A,{className:"w-4 h-4 mr-1"}),e.coverage]})]})]})]}),(0,a.jsx)("div",{className:"space-y-2 mb-6",children:e.features.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,a.jsx)(j.A,{className:"w-4 h-4 text-green-500 mr-2"}),e]},s))}),(0,a.jsxs)(g.Pd,{className:"w-full",children:["Оформить полис",(0,a.jsx)(p.A,{className:"w-4 h-4 ml-2"})]})]},e.id)})})]}),(0,a.jsxs)("div",{className:"mb-12",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold text-gray-900 mb-6 text-center",children:"Как это работает?"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)("span",{className:"text-primary-600 font-bold text-lg",children:"1"})}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Выберите тип страхования"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Определите, какие риски вы хотите застраховать"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)("span",{className:"text-primary-600 font-bold text-lg",children:"2"})}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Заполните анкету"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Укажите данные объекта и ваши контактные данные"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)("span",{className:"text-primary-600 font-bold text-lg",children:"3"})}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Получите полис"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Оплатите и получите страховой полис на email"})]})]})]}),(0,a.jsxs)("div",{className:"bg-primary-600 rounded-lg p-8 text-center",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-white mb-4",children:"Готовы застраховать свою недвижимость?"}),(0,a.jsx)("p",{className:"text-primary-100 mb-6 max-w-2xl mx-auto",children:"Получите консультацию специалиста и подберите оптимальный вариант страхования для ваших объектов"}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[(0,a.jsxs)(g.Pd,{size:"lg",variant:"secondary",children:["Получить консультацию",(0,a.jsx)(y.A,{className:"w-4 h-4 ml-2"})]}),(0,a.jsxs)(g.Pd,{size:"lg",variant:"outline",className:"border-white text-white hover:bg-white hover:text-primary-600",children:["Рассчитать стоимость",(0,a.jsx)(N.A,{className:"w-4 h-4 ml-2"})]})]})]}),(0,a.jsxs)("div",{className:"mt-12",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold text-gray-900 mb-6 text-center",children:"Часто задаваемые вопросы"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)(g.zk,{className:"p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Что покрывает страхование имущества?"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Страхование имущества покрывает ущерб от пожара, затопления, кражи, стихийных бедствий и вандализма."})]}),(0,a.jsxs)(g.zk,{className:"p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Как быстро происходит выплата?"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Выплата производится в течение 5-15 рабочих дней после предоставления всех необходимых документов."})]}),(0,a.jsxs)(g.zk,{className:"p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Можно ли застраховать несколько объектов?"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Да, вы можете застраховать любое количество объектов недвижимости по одному полису."})]}),(0,a.jsxs)(g.zk,{className:"p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Что делать при наступлении страхового случая?"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Немедленно сообщите о происшествии в страховую компанию и зафиксируйте ущерб фотографиями."})]})]})]})]}),(0,a.jsx)(g.RE.Content,{value:"policies",children:(0,a.jsx)(M,{onEdit:e=>{m(e),c(!0),r("form")},onDelete:e=>{},onPay:e=>{}})}),(0,a.jsx)(g.RE.Content,{value:"form",children:(0,a.jsx)(E,{onSuccess:e=>{c(!1),m(null)},onCancel:()=>r("policies"),initialData:n})})]})})})}},84616:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(72895).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},91788:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(72895).A)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},92138:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(72895).A)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])}},e=>{e.O(0,[7910,1665,8441,5964,7358],()=>e(e.s=66328)),_N_E=e.O()}]);