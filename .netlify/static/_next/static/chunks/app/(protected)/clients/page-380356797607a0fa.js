(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2919],{4621:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(72895).A)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]])},30664:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>N});var a=t(95155),l=t(12115),i=t(41665),n=t(32251),c=t(71007),d=t(4516),r=t(69074);function m(e){let{isOpen:s,onClose:t,client:n,onLinkSuccess:m}=e,[x,o]=(0,l.useState)([]),[h,u]=(0,l.useState)(""),[p,j]=(0,l.useState)("TENANT"),[N,b]=(0,l.useState)(""),[v,f]=(0,l.useState)(!1),[y,g]=(0,l.useState)(""),[k,T]=(0,l.useState)(""),[w,A]=(0,l.useState)([]);(0,l.useEffect)(()=>{s&&n&&(C(),S())},[s,n]);let C=async()=>{try{let e=await fetch("/api/properties"),s=await e.json();s.success&&o(s.data)}catch(e){console.error("Error fetching properties:",e),g("Ошибка при загрузке объектов недвижимости")}},S=async()=>{if(n)try{let e=await fetch("/api/clients/".concat(n.id,"/properties")),s=await e.json();s.success&&A(s.data)}catch(e){console.error("Error fetching existing links:",e)}},E=async e=>{if(e.preventDefault(),n&&h){f(!0),g(""),T("");try{let e=await fetch("/api/clients/property-links",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({clientId:n.id,propertyId:h,linkType:p,comment:N})}),s=await e.json();s.success?(T("Связь успешно создана"),u(""),j("TENANT"),b(""),S(),m(),setTimeout(()=>{T("")},3e3)):g(s.error||"Ошибка при создании связи")}catch(e){console.error("Error creating property link:",e),g("Ошибка при создании связи")}finally{f(!1)}}},D=async e=>{if(confirm("Вы уверены, что хотите удалить эту связь?"))try{let s=await fetch("/api/clients/property-links/".concat(e),{method:"DELETE"}),t=await s.json();t.success?(T("Связь успешно удалена"),S(),m(),setTimeout(()=>{T("")},3e3)):g(t.error||"Ошибка при удалении связи")}catch(e){console.error("Error deleting property link:",e),g("Ошибка при удалении связи")}};return(0,a.jsx)(i.ih,{isOpen:s,onClose:t,title:"Связать клиента с объектом",children:(0,a.jsxs)("div",{className:"space-y-6",children:[n&&(0,a.jsx)(i.zk,{variant:"elevated",padding:"md",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(c.A,{className:"w-5 h-5 text-[#0078d4]"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"font-medium text-[#323130]",children:[n.firstName," ",n.lastName]}),(0,a.jsxs)("p",{className:"text-sm text-[#605e5c]",children:["Тип: ","TENANT"===n.type?"Арендатор":"LANDLORD"===n.type?"Арендодатель":"Оба типа"]})]})]})}),y&&(0,a.jsx)(i.N6,{variant:"error",title:"Ошибка",children:y}),k&&(0,a.jsx)(i.N6,{variant:"success",title:"Успешно",children:k}),w.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-[#323130] mb-3",children:"Существующие связи"}),(0,a.jsx)("div",{className:"space-y-3",children:w.map(e=>(0,a.jsx)(i.zk,{variant:"elevated",padding:"md",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,a.jsx)(d.A,{className:"w-4 h-4 text-[#605e5c]"}),(0,a.jsx)("h4",{className:"font-medium text-[#323130]",children:e.property.title}),(0,a.jsx)(i.a,{className:(e=>{switch(e){case"OWNER":return"bg-[#dff6dd] text-[#107c10]";case"TENANT":return"bg-[#deecf9] text-[#0078d4]";case"INTERESTED":return"bg-[#fff4ce] text-[#856404]";default:return"bg-[#f3f2f1] text-[#605e5c]"}})(e.linkType),children:(e=>{switch(e){case"OWNER":return"Владелец";case"TENANT":return"Арендатор";case"INTERESTED":return"Заинтересован";default:return e}})(e.linkType)})]}),(0,a.jsx)("p",{className:"text-sm text-[#605e5c] mb-2",children:e.property.address}),e.comment&&(0,a.jsx)("p",{className:"text-sm text-[#605e5c] mb-2",children:e.comment}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-xs text-[#605e5c]",children:[(0,a.jsx)(r.A,{className:"w-3 h-3"}),(0,a.jsxs)("span",{children:["Создано: ",new Date(e.createdAt).toLocaleDateString("ru-RU")]})]})]}),(0,a.jsx)(i.Pd,{size:"sm",variant:"outline",onClick:()=>D(e.id),children:"Удалить"})]})},e.id))})]}),(0,a.jsxs)("form",{onSubmit:E,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[#323130] mb-2",children:"Выберите объект"}),(0,a.jsx)(i.H1,{value:h,onChange:e=>u(e),placeholder:"Выберите объект недвижимости",options:x.map(e=>({value:e.id,label:"".concat(e.title," - ").concat(e.address)}))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[#323130] mb-2",children:"Тип связи"}),(0,a.jsx)(i.H1,{value:p,onChange:e=>j(e),options:[{value:"OWNER",label:"Владелец объекта"},{value:"TENANT",label:"Арендатор объекта"},{value:"INTERESTED",label:"Заинтересован в аренде"}]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[#323130] mb-2",children:"Комментарий"}),(0,a.jsx)(i.JH,{value:N,onChange:e=>b(e.target.value),placeholder:"Дополнительная информация о связи",rows:3})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,a.jsx)(i.Pd,{type:"button",variant:"outline",onClick:t,disabled:v,children:"Отмена"}),(0,a.jsx)(i.Pd,{type:"submit",disabled:v||!h,children:v?"Создание...":"Связать"})]})]})]})})}var x=t(17580),o=t(84616),h=t(47924),u=t(4621),p=t(38164),j=t(62525);function N(){let[e,s]=(0,l.useState)([]),[t,c]=(0,l.useState)(!0),[d,r]=(0,l.useState)(!1),[N,b]=(0,l.useState)(!1),[v,f]=(0,l.useState)(!1),[y,g]=(0,l.useState)(!1),[k,T]=(0,l.useState)(null),[w,A]=(0,l.useState)(""),[C,S]=(0,l.useState)("ALL"),[E,D]=(0,l.useState)({firstName:"",lastName:"",middleName:"",email:"",phone:"",birthDate:"",types:[],passport:"",snils:"",inn:"",address:"",city:"",notes:"",source:""}),[L,O]=(0,l.useState)([]),[V,$]=(0,l.useState)(""),[R,P]=(0,l.useState)(!1);(0,l.useEffect)(()=>{H()},[]);let H=async()=>{try{let e=await fetch("/api/clients"),t=await e.json();t.success&&s(t.data)}catch(e){console.error("Error fetching clients:",e)}finally{c(!1)}},M=async e=>{e.preventDefault(),P(!0),O([]),$("");let s=E.types.includes("TENANT")&&E.types.includes("LANDLORD")?"BOTH":E.types.includes("TENANT")?"TENANT":E.types.includes("LANDLORD")?"LANDLORD":"TENANT";try{let e=await fetch("/api/clients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...E,type:s})}),t=await e.json();t.success?($(t.message||"Клиент успешно создан"),r(!1),D({firstName:"",lastName:"",middleName:"",email:"",phone:"",birthDate:"",types:[],passport:"",snils:"",inn:"",address:"",city:"",notes:"",source:""}),H(),setTimeout(()=>$(""),3e3)):O([t.error||"Ошибка при создании клиента"])}catch(e){console.error("Error creating client:",e),O(["Ошибка при создании клиента"])}finally{P(!1)}},q=e=>{let{name:s,value:t}=e.target;D(e=>({...e,[s]:t}))},z=e=>{D(s=>({...s,birthDate:e}))},J=e=>{D(s=>({...s,types:e}))},_=async()=>{if(k){P(!0),O([]),$("");try{let e=await fetch("/api/clients/".concat(k.id),{method:"DELETE"}),s=await e.json();s.success?($("Клиент успешно удален"),g(!1),T(null),H(),setTimeout(()=>$(""),3e3)):O([s.error||"Ошибка при удалении клиента"])}catch(e){console.error("Error deleting client:",e),O(["Ошибка при удалении клиента"])}finally{P(!1)}}},B=async e=>{if(e.preventDefault(),P(!0),O([]),$(""),!k)return;let s=E.types.includes("TENANT")&&E.types.includes("LANDLORD")?"BOTH":E.types.includes("TENANT")?"TENANT":E.types.includes("LANDLORD")?"LANDLORD":"TENANT";try{let e=await fetch("/api/clients/".concat(k.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...E,type:s})}),t=await e.json();t.success?($("Клиент успешно обновлен"),b(!1),T(null),H(),D({firstName:"",lastName:"",middleName:"",email:"",phone:"",birthDate:"",types:[],passport:"",snils:"",inn:"",address:"",city:"",notes:"",source:""}),setTimeout(()=>$(""),3e3)):O([t.error||"Ошибка при обновлении клиента"])}catch(e){console.error("Error updating client:",e),O(["Ошибка при обновлении клиента"])}finally{P(!1)}},I=e.filter(e=>{let s=e.firstName.toLowerCase().includes(w.toLowerCase())||e.lastName.toLowerCase().includes(w.toLowerCase())||e.phone.includes(w)||e.email&&e.email.toLowerCase().includes(w.toLowerCase()),t="ALL"===C||e.type===C;return s&&t});return t?(0,a.jsx)("div",{className:"min-h-screen bg-[#faf9f8]",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,a.jsxs)("div",{className:"animate-pulse",children:[(0,a.jsx)("div",{className:"h-8 bg-[#e1dfdd] rounded w-1/4 mb-8"}),(0,a.jsx)("div",{className:"space-y-4",children:[void 0,void 0,void 0,void 0,void 0].map((e,s)=>(0,a.jsx)("div",{className:"h-20 bg-[#e1dfdd] rounded"},s))})]})})}):(0,a.jsx)("div",{className:"min-h-screen bg-[#faf9f8]",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsxs)("div",{className:"mb-6 sm:mb-8",children:[(0,a.jsxs)("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold text-[#323130] flex items-center",children:[(0,a.jsx)(x.A,{className:"mr-3 h-8 w-8 text-[#0078d4]"}),"Клиенты"]}),(0,a.jsx)("p",{className:"mt-1 sm:mt-2 text-sm sm:text-base text-[#605e5c]",children:"Управление базой клиентов"})]}),L.length>0&&(0,a.jsx)(i.N6,{variant:"error",title:"Ошибка",className:"mb-4",children:(0,a.jsx)("ul",{className:"list-disc list-inside",children:L.map((e,s)=>(0,a.jsx)("li",{children:e},s))})}),V&&(0,a.jsx)(i.N6,{variant:"success",title:"Успешно",className:"mb-4",children:V}),(0,a.jsx)("div",{className:"flex justify-end mb-6",children:(0,a.jsx)(i.Pd,{onClick:()=>r(!0),icon:(0,a.jsx)(o.A,{className:"w-4 h-4"}),children:"Добавить клиента"})}),(0,a.jsx)(i.zk,{variant:"elevated",padding:"lg",className:"mb-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsx)(i.V$,{type:"text",placeholder:"Поиск по имени, телефону, email...",value:w,onChange:e=>A(e.target.value),icon:(0,a.jsx)(h.A,{className:"w-4 h-4"})}),(0,a.jsx)(i.H1,{value:C,onChange:e=>S(e),options:[{value:"ALL",label:"Все клиенты"},{value:"TENANT",label:"Арендаторы"},{value:"LANDLORD",label:"Арендодатели"},{value:"BOTH",label:"Оба типа"}]})]})}),(0,a.jsx)(i.zk,{variant:"elevated",padding:"sm",className:"overflow-hidden",children:0===I.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(x.A,{className:"mx-auto h-12 w-12 text-[#605e5c]"}),(0,a.jsx)("h3",{className:"mt-2 text-sm font-medium text-[#323130]",children:"Клиенты не найдены"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-[#605e5c]",children:w||"ALL"!==C?"Попробуйте изменить параметры поиска":"Начните с добавления первого клиента"})]}):(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-[#e1dfdd]",children:[(0,a.jsx)("thead",{className:"bg-[#faf9f8]",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-[#605e5c] uppercase tracking-wider",children:"Клиент"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-[#605e5c] uppercase tracking-wider",children:"Контакты"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-[#605e5c] uppercase tracking-wider",children:"Тип"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-[#605e5c] uppercase tracking-wider",children:"Дата добавления"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-[#605e5c] uppercase tracking-wider",children:"Действия"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-[#e1dfdd]",children:I.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-[#faf9f8]",children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"text-sm font-medium text-[#323130]",children:[e.firstName," ",e.lastName]}),e.middleName&&(0,a.jsx)("div",{className:"text-sm text-[#605e5c]",children:e.middleName})]})}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,a.jsx)("div",{className:"text-sm text-[#323130]",children:e.phone}),e.email&&(0,a.jsx)("div",{className:"text-sm text-[#605e5c]",children:e.email})]}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat("TENANT"===e.type?"bg-[#deecf9] text-[#0078d4]":"LANDLORD"===e.type?"bg-[#dff6dd] text-[#107c10]":"bg-[#f3e5f5] text-[#5c2d91]"),children:(e=>{switch(e){case"TENANT":return"Арендатор";case"LANDLORD":return"Арендодатель";case"BOTH":return"Оба типа";default:return e}})(e.type)})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-[#605e5c]",children:new Date(e.createdAt).toLocaleDateString("ru-RU")}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-[#605e5c]",children:(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)(i.Pd,{size:"sm",variant:"outline",onClick:()=>(e=>{T(e);let s="BOTH"===e.type?["TENANT","LANDLORD"]:"TENANT"===e.type?["TENANT"]:["LANDLORD"];D({firstName:e.firstName,lastName:e.lastName,middleName:e.middleName||"",email:e.email||"",phone:e.phone,birthDate:e.birthDate||"",types:s,passport:e.passport||"",snils:e.snils||"",inn:e.inn||"",address:e.address||"",city:e.city||"",notes:e.notes||"",source:e.source||""}),b(!0)})(e),icon:(0,a.jsx)(u.A,{className:"w-3 h-3"}),children:"Редактировать"}),(0,a.jsx)(i.Pd,{size:"sm",variant:"outline",onClick:()=>{T(e),f(!0)},icon:(0,a.jsx)(p.A,{className:"w-3 h-3"}),children:"Связать"}),(0,a.jsx)(i.Pd,{size:"sm",variant:"outline",onClick:()=>{T(e),g(!0)},icon:(0,a.jsx)(j.A,{className:"w-3 h-3"}),children:"Удалить"})]})})]},e.id))})]})})}),(0,a.jsx)(i.ih,{isOpen:d,onClose:()=>r(!1),title:"Добавить нового клиента",children:(0,a.jsxs)("form",{onSubmit:M,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-[#323130] mb-1",children:["Имя ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)(i.V$,{name:"firstName",placeholder:"Имя",value:E.firstName,onChange:q,required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-[#323130] mb-1",children:["Фамилия ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)(i.V$,{name:"lastName",placeholder:"Фамилия",value:E.lastName,onChange:q,required:!0})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[#323130] mb-1",children:"Отчество"}),(0,a.jsx)(i.V$,{name:"middleName",placeholder:"Отчество",value:E.middleName,onChange:q})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-[#323130] mb-1",children:["Телефон ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)(i.V$,{name:"phone",placeholder:"+7 (999) 123-45-67",value:E.phone,onChange:q,required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[#323130] mb-1",children:"Email"}),(0,a.jsx)(i.V$,{name:"email",type:"email",placeholder:"email@example.com",value:E.email,onChange:q})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[#323130] mb-1",children:"Дата рождения"}),(0,a.jsx)(n.l,{value:E.birthDate,onChange:z})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-[#323130] mb-1",children:["Роли клиента ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)(i._J,{value:E.types,onChange:J,options:[{value:"TENANT",label:"Арендатор"},{value:"LANDLORD",label:"Арендодатель"}],placeholder:"Выберите роли клиента"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[#323130] mb-1",children:"Паспорт"}),(0,a.jsx)(i.V$,{name:"passport",placeholder:"Паспорт (серия номер)",value:E.passport,onChange:q})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[#323130] mb-1",children:"СНИЛС"}),(0,a.jsx)(i.V$,{name:"snils",placeholder:"СНИЛС",value:E.snils,onChange:q})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[#323130] mb-1",children:"ИНН"}),(0,a.jsx)(i.V$,{name:"inn",placeholder:"ИНН",value:E.inn,onChange:q})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[#323130] mb-1",children:"Адрес"}),(0,a.jsx)(i.V$,{name:"address",placeholder:"Адрес",value:E.address,onChange:q})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[#323130] mb-1",children:"Город"}),(0,a.jsx)(i.V$,{name:"city",placeholder:"Город",value:E.city,onChange:q})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[#323130] mb-1",children:"Источник клиента"}),(0,a.jsx)(i.V$,{name:"source",placeholder:"Источник клиента",value:E.source,onChange:q})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[#323130] mb-1",children:"Заметки"}),(0,a.jsx)(i.JH,{name:"notes",placeholder:"Заметки",value:E.notes,onChange:q,rows:3})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,a.jsx)(i.Pd,{type:"button",variant:"outline",onClick:()=>r(!1),disabled:R,children:"Отмена"}),(0,a.jsx)(i.Pd,{type:"submit",disabled:R,children:R?"Создание...":"Добавить клиента"})]})]})}),(0,a.jsx)(i.ih,{isOpen:N,onClose:()=>b(!1),title:"Редактировать клиента",children:(0,a.jsxs)("form",{onSubmit:B,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-[#323130] mb-1",children:["Имя ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)(i.V$,{name:"firstName",placeholder:"Имя",value:E.firstName,onChange:q,required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-[#323130] mb-1",children:["Фамилия ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)(i.V$,{name:"lastName",placeholder:"Фамилия",value:E.lastName,onChange:q,required:!0})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[#323130] mb-1",children:"Отчество"}),(0,a.jsx)(i.V$,{name:"middleName",placeholder:"Отчество",value:E.middleName,onChange:q})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-[#323130] mb-1",children:["Телефон ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)(i.V$,{name:"phone",placeholder:"+7 (999) 123-45-67",value:E.phone,onChange:q,required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[#323130] mb-1",children:"Email"}),(0,a.jsx)(i.V$,{name:"email",type:"email",placeholder:"email@example.com",value:E.email,onChange:q})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[#323130] mb-1",children:"Дата рождения"}),(0,a.jsx)(n.l,{value:E.birthDate,onChange:z})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-[#323130] mb-1",children:["Роли клиента ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)(i._J,{value:E.types,onChange:J,options:[{value:"TENANT",label:"Арендатор"},{value:"LANDLORD",label:"Арендодатель"}],placeholder:"Выберите роли клиента"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[#323130] mb-1",children:"Паспорт"}),(0,a.jsx)(i.V$,{name:"passport",placeholder:"Паспорт (серия номер)",value:E.passport,onChange:q})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[#323130] mb-1",children:"СНИЛС"}),(0,a.jsx)(i.V$,{name:"snils",placeholder:"СНИЛС",value:E.snils,onChange:q})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[#323130] mb-1",children:"ИНН"}),(0,a.jsx)(i.V$,{name:"inn",placeholder:"ИНН",value:E.inn,onChange:q})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[#323130] mb-1",children:"Адрес"}),(0,a.jsx)(i.V$,{name:"address",placeholder:"Адрес",value:E.address,onChange:q})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[#323130] mb-1",children:"Город"}),(0,a.jsx)(i.V$,{name:"city",placeholder:"Город",value:E.city,onChange:q})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[#323130] mb-1",children:"Источник клиента"}),(0,a.jsx)(i.V$,{name:"source",placeholder:"Источник клиента",value:E.source,onChange:q})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[#323130] mb-1",children:"Заметки"}),(0,a.jsx)(i.JH,{name:"notes",placeholder:"Заметки",value:E.notes,onChange:q,rows:3})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,a.jsx)(i.Pd,{type:"button",variant:"outline",onClick:()=>b(!1),disabled:R,children:"Отмена"}),(0,a.jsx)(i.Pd,{type:"submit",disabled:R,children:R?"Сохранение...":"Сохранить изменения"})]})]})}),(0,a.jsx)(i.ih,{isOpen:y,onClose:()=>g(!1),title:"Подтверждение удаления",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"bg-[#faf9f8] p-4 rounded-lg",children:[(0,a.jsxs)("h3",{className:"font-medium text-[#323130] mb-2",children:["Удалить клиента: ",null==k?void 0:k.firstName," ",null==k?void 0:k.lastName,"?"]}),(0,a.jsx)("p",{className:"text-sm text-[#605e5c]",children:"Это действие нельзя отменить. Все данные клиента будут удалены безвозвратно."})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,a.jsx)(i.Pd,{type:"button",variant:"outline",onClick:()=>g(!1),disabled:R,children:"Отмена"}),(0,a.jsx)(i.Pd,{type:"button",variant:"outline",onClick:_,disabled:R,children:R?"Удаление...":"Удалить"})]})]})}),(0,a.jsx)(m,{isOpen:v,onClose:()=>f(!1),client:k,onLinkSuccess:()=>{}})]})})}},32251:(e,s,t)=>{"use strict";t.d(s,{l:()=>n});var a=t(95155),l=t(12115),i=t(41665);function n(e){let{value:s,onChange:t,placeholder:n="Дата рождения",className:c="",disabled:d=!1}=e,[r,m]=(0,l.useState)(""),[x,o]=(0,l.useState)(""),[h,u]=(0,l.useState)(""),[p,j]=(0,l.useState)(""),[N,b]=(0,l.useState)(!1),v=Array.from({length:31},(e,s)=>s+1),f=new Date().getFullYear(),y=Array.from({length:f-1950+1},(e,s)=>f-s),g=[];for(let e=1950;e<=f;e+=10){let s=Math.min(e+9,f);g.push({label:"".concat(e,"-").concat(s),years:Array.from({length:s-e+1},(s,t)=>e+t)})}return(0,l.useEffect)(()=>{if(s){let e=new Date(s);isNaN(e.getTime())||(m(e.getDate().toString().padStart(2,"0")),o((e.getMonth()+1).toString().padStart(2,"0")),u(e.getFullYear().toString()),j(s))}},[s]),(0,l.useEffect)(()=>{if(!N&&r&&x&&h){let e="".concat(h,"-").concat(x,"-").concat(r.padStart(2,"0"));t(e),j(e)}else N||r||x||h||(t(""),j(""))},[r,x,h,t,N]),(0,a.jsxs)("div",{className:"space-y-3 ".concat(c),children:[!d&&(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"radio",checked:!N,onChange:()=>b(!1),className:"mr-2",disabled:d}),(0,a.jsx)("span",{className:"text-sm text-[#323130]",children:"Выбор из списка"})]}),(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"radio",checked:N,onChange:()=>b(!0),className:"mr-2",disabled:d}),(0,a.jsx)("span",{className:"text-sm text-[#323130]",children:"Ручной ввод"})]})]}),N?(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[#323130] mb-1",children:"Дата (ГГГГ-ММ-ДД)"}),(0,a.jsx)(i.V$,{value:p,onChange:e=>(e=>{if(j(e),e.match(/^\d{4}-\d{2}-\d{2}$/)){let s=new Date(e);isNaN(s.getTime())||(m(s.getDate().toString().padStart(2,"0")),o((s.getMonth()+1).toString().padStart(2,"0")),u(s.getFullYear().toString()),t(e),b(!1))}})(e.target.value),onBlur:()=>{if(p&&p.match(/^\d{4}-\d{2}-\d{2}$/)){let e=new Date(p);isNaN(e.getTime())||(m(e.getDate().toString().padStart(2,"0")),o((e.getMonth()+1).toString().padStart(2,"0")),u(e.getFullYear().toString()),t(p),b(!1))}},placeholder:"2020-01-15",disabled:d})]}):(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[#323130] mb-1",children:"День"}),(0,a.jsx)(i.H1,{value:r,onChange:e=>m(e),placeholder:"День",disabled:d,options:[{value:"",label:"День"},...v.map(e=>({value:e.toString(),label:e.toString()}))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[#323130] mb-1",children:"Месяц"}),(0,a.jsx)(i.H1,{value:x,onChange:e=>o(e),placeholder:"Месяц",disabled:d,options:[{value:"",label:"Месяц"},{value:"01",label:"Январь"},{value:"02",label:"Февраль"},{value:"03",label:"Март"},{value:"04",label:"Апрель"},{value:"05",label:"Май"},{value:"06",label:"Июнь"},{value:"07",label:"Июль"},{value:"08",label:"Август"},{value:"09",label:"Сентябрь"},{value:"10",label:"Октябрь"},{value:"11",label:"Ноябрь"},{value:"12",label:"Декабрь"}]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[#323130] mb-1",children:"Год"}),(0,a.jsx)(i.H1,{value:h,onChange:e=>u(e),placeholder:"Год",disabled:d,options:[{value:"",label:"Год"},...g.map(e=>({value:"",label:"--- ".concat(e.label," ---"),disabled:!0})),...y.map(e=>({value:e.toString(),label:e.toString()}))]})]})]})]})}},38164:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(72895).A)("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]])},47924:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(72895).A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},62525:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(72895).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},84616:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(72895).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},90432:(e,s,t)=>{Promise.resolve().then(t.bind(t,30664))}},e=>{e.O(0,[7910,1665,8441,5964,7358],()=>e(e.s=90432)),_N_E=e.O()}]);