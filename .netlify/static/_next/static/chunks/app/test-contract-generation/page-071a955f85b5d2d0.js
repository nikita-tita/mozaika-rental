(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8197],{40419:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});var s=a(95155),l=a(12115),r=a(41665);function n(){var e,t;let[a,n]=(0,l.useState)({propertyTitle:"Тестовая квартира",propertyAddress:"г. Москва, ул. Ленина, д. 1, кв. 5",landlordName:"Иванов Иван Иванович",landlordPassport:"1234 567890",landlordPassportIssuedBy:"УФМС России по г. Москве",landlordPassportIssuedDate:"01.01.2010",landlordSnils:"123-456-789 01",landlordInn:"123456789012",landlordAddress:"г. Москва, ул. Пушкина, д. 10",landlordRegistrationAddress:"г. Москва, ул. Пушкина, д. 10",tenantName:"Петров Петр Петрович",tenantPassport:"9876 543210",tenantPassportIssuedBy:"УФМС России по г. Москве",tenantPassportIssuedDate:"01.01.2015",tenantBirthDate:"01.01.1990",tenantPhone:"+7 (999) 123-45-67",tenantEmail:"petrov@example.com",tenantRegistrationAddress:"г. Москва, ул. Гагарина, д. 20",propertyType:"Квартира",propertyArea:"45",propertyRooms:"2",propertyFloor:"5",propertyTotalFloors:"9",propertyCadastralNumber:"77:01:0001001:1234",propertyOwnershipType:"Частная собственность",propertyFurnished:!0,startDate:"2024-01-01",endDate:"2024-12-31",monthlyRent:45e3,paymentDay:"5",paymentSchedule:"monthly",utilities:!0,utilitiesIncluded:!0,deposit:45e3,depositReturnConditions:"Возвращается при расторжении договора при отсутствии претензий",latePaymentPenalty:.001,earlyTerminationConditions:"Согласно законодательству РФ",additionalTerms:"Все споры решаются путем переговоров, а при невозможности достижения соглашения - в судебном порядке."}),[d,o]=(0,l.useState)(!1),[i,c]=(0,l.useState)(null),[p,m]=(0,l.useState)(null),h=async e=>{o(!0),m(null),c(null);try{var t;let s=localStorage.getItem("auth-token")||(null==(t=document.cookie.split("auth-token=")[1])?void 0:t.split(";")[0]);if(!s){m("Необходима авторизация для генерации договора"),o(!1);return}let l=await fetch("/api/contracts/generate",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify({contractData:a})});if(!l.ok)throw Error("Ошибка HTTP: ".concat(l.status));let r=await l.json();c(r);let n=await fetch("/api/contracts/download",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify({contractData:a,fileType:e})});if(!n.ok)throw Error("Ошибка при скачивании файла");let d=await n.blob(),i=window.URL.createObjectURL(d),p=document.createElement("a");p.href=i,p.download="Договор_аренды_".concat(a.propertyTitle.replace(/[^a-zA-Zа-яА-Я0-9]/g,"_"),"_").concat(new Date().toISOString().split("T")[0],".").concat("word"===e?"docx":"pdf"),document.body.appendChild(p),p.click(),document.body.removeChild(p),window.URL.revokeObjectURL(i),alert("Договор успешно сгенерирован и скачан в формате ".concat(e.toUpperCase()))}catch(e){console.error("Ошибка при генерации договора:",e),m(e instanceof Error?e.message:"Неизвестная ошибка")}finally{o(!1)}};return(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,s.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Тест генерации договоров"}),(0,s.jsx)("p",{className:"text-lg text-gray-600",children:"Тестирование API генерации договоров в форматах Word и PDF"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,s.jsxs)(r.zk,{className:"p-6",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Данные договора"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)(r.V$,{label:"Название объекта",value:a.propertyTitle,onChange:e=>n(t=>({...t,propertyTitle:e.target.value}))}),(0,s.jsx)(r.V$,{label:"Адрес объекта",value:a.propertyAddress,onChange:e=>n(t=>({...t,propertyAddress:e.target.value}))}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsx)(r.V$,{label:"Имя наймодателя",value:a.landlordName,onChange:e=>n(t=>({...t,landlordName:e.target.value}))}),(0,s.jsx)(r.V$,{label:"Имя нанимателя",value:a.tenantName,onChange:e=>n(t=>({...t,tenantName:e.target.value}))})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsx)(r.V$,{label:"Дата начала",type:"date",value:a.startDate,onChange:e=>n(t=>({...t,startDate:e.target.value}))}),(0,s.jsx)(r.V$,{label:"Дата окончания",type:"date",value:a.endDate,onChange:e=>n(t=>({...t,endDate:e.target.value}))})]}),(0,s.jsx)(r.V$,{label:"Арендная плата (руб/мес)",type:"number",value:a.monthlyRent,onChange:e=>n(t=>({...t,monthlyRent:parseInt(e.target.value)||0}))}),(0,s.jsx)(r.V$,{label:"Залог (руб)",type:"number",value:a.deposit,onChange:e=>n(t=>({...t,deposit:parseInt(e.target.value)||0}))})]})]}),(0,s.jsxs)(r.zk,{className:"p-6",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Генерация договора"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)(r.Pd,{onClick:()=>h("pdf"),disabled:d,className:"w-full",children:d?"Генерация...":"\uD83D\uDCC4 Сгенерировать PDF"}),(0,s.jsx)(r.Pd,{onClick:()=>h("word"),disabled:d,variant:"outline",className:"w-full",children:d?"Генерация...":"\uD83D\uDCDD Сгенерировать Word"})]}),p&&(0,s.jsx)("div",{className:"mt-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:(0,s.jsxs)("p",{className:"text-red-800 text-sm",children:["Ошибка: ",p]})}),i&&(0,s.jsxs)("div",{className:"mt-4 p-4 bg-green-50 border border-green-200 rounded-lg",children:[(0,s.jsx)("p",{className:"text-green-800 text-sm font-semibold",children:"Договор успешно сгенерирован!"}),(0,s.jsxs)("p",{className:"text-green-700 text-sm mt-1",children:["ID: ",null==(e=i.data)?void 0:e.id]}),(0,s.jsxs)("p",{className:"text-green-700 text-sm",children:["Название: ",null==(t=i.data)?void 0:t.title]})]})]})]}),(0,s.jsxs)(r.zk,{className:"p-6 mt-8",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Информация о шаблоне"}),(0,s.jsxs)("div",{className:"space-y-2 text-sm text-gray-600",children:[(0,s.jsxs)("p",{children:["• Используется реальный шаблон: ",(0,s.jsx)("code",{children:"Договор найма жилого помещения.docx"})]}),(0,s.jsx)("p",{children:"• Поддерживаются форматы: PDF и Word (.docx)"}),(0,s.jsx)("p",{children:"• Автоматическое заполнение всех полей договора"}),(0,s.jsx)("p",{children:"• Юридически корректная структура документа"}),(0,s.jsx)("p",{children:"• Автоматическое скачивание файла после генерации"})]})]})]})})}},57118:(e,t,a)=>{Promise.resolve().then(a.bind(a,40419))}},e=>{e.O(0,[7910,1665,8441,5964,7358],()=>e(e.s=57118)),_N_E=e.O()}]);