# üöÄ –î–µ–ø–ª–æ–π M¬≤ –Ω–∞ REG.RU

## üìã –û–±—â–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

–î–ª—è —É—Å–ø–µ—à–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ REG.RU –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è:

1. **VPS —Å–µ—Ä–≤–µ—Ä** –Ω–∞ REG.RU (–º–∏–Ω–∏–º—É–º 2GB RAM, 20GB SSD)
2. **–î–æ–º–µ–Ω** –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã–π –∫ VPS
3. **SSH –¥–æ—Å—Ç—É–ø** –∫ —Å–µ—Ä–≤–µ—Ä—É
4. **–ë–∞–∑–æ–≤—ã–µ –∑–Ω–∞–Ω–∏—è** Linux/Ubuntu

## üõí –ù–∞—Å—Ç—Ä–æ–π–∫–∞ VPS –Ω–∞ REG.RU

### –®–∞–≥ 1: –ó–∞–∫–∞–∑ VPS

1. –í–æ–π–¥–∏—Ç–µ –≤ –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è REG.RU
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª "VPS/VDS" 
3. –í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –º–∏–Ω–∏–º—É–º 2GB RAM)
4. –í—ã–±–µ—Ä–∏—Ç–µ Ubuntu 20.04/22.04 LTS –∫–∞–∫ –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—É—é —Å–∏—Å—Ç–µ–º—É
5. –ü—Ä–∏ –∑–∞–∫–∞–∑–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —É–∫–∞–∂–∏—Ç–µ SSH –∫–ª—é—á –∏–ª–∏ –∑–∞–ø–æ–º–Ω–∏—Ç–µ –ø–∞—Ä–æ–ª—å root

### –®–∞–≥ 2: –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –¥–æ—Å—Ç—É–ø–∞

–ü–æ—Å–ª–µ –∑–∞–∫–∞–∑–∞ VPS –≤—ã –ø–æ–ª—É—á–∏—Ç–µ:
- **IP –∞–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞** (–Ω–∞–ø—Ä–∏–º–µ—Ä: 185.xxx.xxx.xxx)
- **–õ–æ–≥–∏–Ω**: root
- **–ü–∞—Ä–æ–ª—å** –∏–ª–∏ SSH –∫–ª—é—á

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

### –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É

```bash
# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø–æ SSH
ssh root@YOUR_SERVER_IP

# –ò–ª–∏ —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –∫–ª—é—á–∞
ssh -i ~/.ssh/your_key root@YOUR_SERVER_IP
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã

```bash
# –û–±–Ω–æ–≤–ª—è–µ–º –ø–∞–∫–µ—Ç—ã
apt update && apt upgrade -y

# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —É—Ç–∏–ª–∏—Ç—ã
apt install -y curl wget git nano ufw
```

### –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```bash
# –°–æ–∑–¥–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
adduser mozaika
usermod -aG sudo mozaika

# –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º SSH –∫–ª—é—á–∏ –¥–ª—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
mkdir -p /home/mozaika/.ssh
cp /root/.ssh/authorized_keys /home/mozaika/.ssh/
chown -R mozaika:mozaika /home/mozaika/.ssh
chmod 700 /home/mozaika/.ssh
chmod 600 /home/mozaika/.ssh/authorized_keys
```

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Node.js

```bash
# –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º—Å—è –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è mozaika
su - mozaika

# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º NVM
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.0/install.sh | bash
source ~/.bashrc

# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º Node.js 18
nvm install 18
nvm use 18
nvm alias default 18

# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–∞–∫–µ—Ç—ã
npm install -g pm2 yarn
```

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ PostgreSQL

```bash
# –í–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –∫ root
exit

# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º PostgreSQL
apt install -y postgresql postgresql-contrib

# –ó–∞–ø—É—Å–∫–∞–µ–º –∏ –≤–∫–ª—é—á–∞–µ–º –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫
systemctl start postgresql
systemctl enable postgresql

# –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
sudo -u postgres psql << EOF
CREATE DATABASE m2_rental;
CREATE USER mozaika_user WITH ENCRYPTED PASSWORD 'STRONG_PASSWORD_HERE';
GRANT ALL PRIVILEGES ON DATABASE m2_rental TO mozaika_user;
ALTER USER mozaika_user CREATEDB;
\q
EOF
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ñ–∞–π—Ä–≤–æ–ª–∞

```bash
# –í–∫–ª—é—á–∞–µ–º ufw
ufw enable

# –†–∞–∑—Ä–µ—à–∞–µ–º SSH
ufw allow ssh

# –†–∞–∑—Ä–µ—à–∞–µ–º HTTP –∏ HTTPS
ufw allow 80
ufw allow 443

# –†–∞–∑—Ä–µ—à–∞–µ–º –ø–æ—Ä—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (3000)
ufw allow 3000

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
ufw status
```

## üöÄ –î–µ–ø–ª–æ–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

```bash
# –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º—Å—è –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è mozaika
su - mozaika

# –ö–ª–æ–Ω–∏—Ä—É–µ–º –ø—Ä–æ–µ–∫—Ç (–∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π)
git clone https://github.com/YOUR_USERNAME/mozaika.git
cd mozaika
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
# –°–æ–∑–¥–∞–µ–º —Ñ–∞–π–ª –æ–∫—Ä—É–∂–µ–Ω–∏—è
cp env.example .env
nano .env
```

–ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `.env`:

```env
# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
DATABASE_URL="postgresql://mozaika_user:STRONG_PASSWORD_HERE@localhost:5432/m2_rental"

# JWT —Å–µ–∫—Ä–µ—Ç—ã (–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ —Å–ª—É—á–∞–π–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏)
JWT_SECRET="your-super-secret-jwt-key-32-chars-min"

# –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
LOG_LEVEL="INFO"

# Next.js
NEXT_TELEMETRY_DISABLED="1"

# –î–æ–º–µ–Ω–Ω–æ–µ –∏–º—è (–∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à –¥–æ–º–µ–Ω)
CORS_ORIGIN="https://yourdomain.com"

# –û—Å—Ç–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏...
```

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
yarn install

# –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º Prisma –∫–ª–∏–µ–Ω—Ç
npx prisma generate

# –ü—Ä–∏–º–µ–Ω—è–µ–º –º–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
npx prisma migrate deploy

# –°–æ–±–∏—Ä–∞–µ–º –ø—Ä–æ–µ–∫—Ç
yarn build
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ PM2

```bash
# –°–æ–∑–¥–∞–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é PM2
cat > ecosystem.config.js << EOF
module.exports = {
  apps: [{
    name: 'mozaika',
    script: 'npm',
    args: 'start',
    cwd: '/home/mozaika/mozaika',
    env: {
      NODE_ENV: 'production',
      PORT: 3000
    },
    instances: 1,
    exec_mode: 'fork',
    watch: false,
    max_memory_restart: '512M',
    log_file: './logs/combined.log',
    out_file: './logs/out.log',
    error_file: './logs/error.log',
    time: true
  }]
}
EOF

# –°–æ–∑–¥–∞–µ–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è –ª–æ–≥–æ–≤
mkdir -p logs

# –ó–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
pm2 start ecosystem.config.js

# –°–æ—Ö—Ä–∞–Ω—è–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é PM2
pm2 save

# –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫
pm2 startup
```

## üåê –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Nginx (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Nginx

```bash
# –í–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –∫ root
exit

# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º Nginx
apt install -y nginx

# –ó–∞–ø—É—Å–∫–∞–µ–º –∏ –≤–∫–ª—é—á–∞–µ–º –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫
systemctl start nginx
systemctl enable nginx
```

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Nginx

```bash
# –°–æ–∑–¥–∞–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é —Å–∞–π—Ç–∞
cat > /etc/nginx/sites-available/mozaika << EOF
server {
    listen 80;
    server_name yourdomain.com www.yourdomain.com;

    location / {
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade \$http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host \$host;
        proxy_set_header X-Real-IP \$remote_addr;
        proxy_set_header X-Forwarded-For \$proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto \$scheme;
        proxy_cache_bypass \$http_upgrade;
    }
}
EOF

# –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º —Å–∞–π—Ç
ln -s /etc/nginx/sites-available/mozaika /etc/nginx/sites-enabled/
rm /etc/nginx/sites-enabled/default

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
nginx -t

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ–º Nginx
systemctl restart nginx
```

## üîí –ù–∞—Å—Ç—Ä–æ–π–∫–∞ SSL (Let's Encrypt)

```bash
# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º Certbot
apt install -y certbot python3-certbot-nginx

# –ü–æ–ª—É—á–∞–µ–º SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç (–∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à –¥–æ–º–µ–Ω)
certbot --nginx -d yourdomain.com -d www.yourdomain.com

# –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
crontab -e
# –î–æ–±–∞–≤—å—Ç–µ —Å—Ç—Ä–æ–∫—É:
# 0 12 * * * /usr/bin/certbot renew --quiet
```

## üîÑ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

### –°–æ–∑–¥–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞ –¥–µ–ø–ª–æ—è

```bash
# –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º—Å—è –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è mozaika
su - mozaika

# –°–æ–∑–¥–∞–µ–º —Å–∫—Ä–∏–ø—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
cat > ~/deploy.sh << 'EOF'
#!/bin/bash
cd /home/mozaika/mozaika

echo "üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è..."

# –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
pm2 stop mozaika

# –ü–æ–ª—É—á–∞–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
git pull origin main

# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
yarn install

# –ü—Ä–∏–º–µ–Ω—è–µ–º –º–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
npx prisma migrate deploy

# –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º Prisma –∫–ª–∏–µ–Ω—Ç
npx prisma generate

# –°–æ–±–∏—Ä–∞–µ–º –ø—Ä–æ–µ–∫—Ç
yarn build

# –ó–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
pm2 start mozaika

echo "‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ!"
EOF

# –î–µ–ª–∞–µ–º —Å–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º
chmod +x ~/deploy.sh
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Webhook (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–î–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –¥–µ–ø–ª–æ—è –ø—Ä–∏ push –≤ GitHub:

```bash
# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø—Ä–æ—Å—Ç–æ–π webhook —Å–µ—Ä–≤–µ—Ä
npm install -g github-webhook-handler

# –°–æ–∑–¥–∞–µ–º —Å–∫—Ä–∏–ø—Ç webhook
cat > ~/webhook.js << 'EOF'
const http = require('http')
const createHandler = require('github-webhook-handler')
const { exec } = require('child_process')

const handler = createHandler({ path: '/webhook', secret: 'YOUR_WEBHOOK_SECRET' })

http.createServer((req, res) => {
  handler(req, res, (err) => {
    res.statusCode = 404
    res.end('no such location')
  })
}).listen(7777)

handler.on('error', (err) => {
  console.error('Error:', err.message)
})

handler.on('push', (event) => {
  console.log('Received a push event for %s to %s',
    event.payload.repository.name,
    event.payload.ref)
  
  if (event.payload.ref === 'refs/heads/main') {
    exec('/home/mozaika/deploy.sh', (error, stdout, stderr) => {
      if (error) {
        console.error(`exec error: ${error}`)
        return
      }
      console.log(`stdout: ${stdout}`)
      console.error(`stderr: ${stderr}`)
    })
  }
})

console.log('Webhook server running on port 7777')
EOF

# –ó–∞–ø—É—Å–∫–∞–µ–º webhook —á–µ—Ä–µ–∑ PM2
pm2 start webhook.js --name "webhook"
pm2 save
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤

```bash
# –õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
pm2 logs mozaika

# –õ–æ–≥–∏ Nginx
tail -f /var/log/nginx/access.log
tail -f /var/log/nginx/error.log

# –õ–æ–≥–∏ PostgreSQL
tail -f /var/log/postgresql/postgresql-*-main.log
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ—Å—É—Ä—Å–æ–≤

```bash
# –°—Ç–∞—Ç—É—Å –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
pm2 status

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
pm2 monit

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–∏—Å–∫–∞
df -h

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏
free -m
```

## üêõ –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ü—Ä–æ–±–ª–µ–º—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ PostgreSQL
sudo -u postgres psql -c "SELECT version();"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
sudo -u postgres psql -l

# –°–±—Ä–æ—Å –ø–∞—Ä–æ–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
sudo -u postgres psql -c "ALTER USER mozaika_user PASSWORD 'NEW_PASSWORD';"
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º

```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
pm2 restart mozaika

# –û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞ –∏ –ø–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
rm -rf node_modules .next
yarn install
yarn build

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Ä—Ç–æ–≤
netstat -tulpn | grep :3000
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å Nginx

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
nginx -t

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ Nginx
systemctl restart nginx

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
systemctl status nginx
```

## üîß –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ PostgreSQL

```bash
# –†–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é PostgreSQL
nano /etc/postgresql/14/main/postgresql.conf

# –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –Ω–µ–±–æ–ª—å—à–æ–≥–æ VPS:
# shared_buffers = 256MB
# effective_cache_size = 1GB
# work_mem = 4MB
# max_connections = 100

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ–º PostgreSQL
systemctl restart postgresql
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Nginx –¥–ª—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤

```bash
# –û–±–Ω–æ–≤–ª—è–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é Nginx
nano /etc/nginx/sites-available/mozaika

# –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç–∫—É —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤:
location /_next/static/ {
    alias /home/mozaika/mozaika/.next/static/;
    expires 365d;
    access_log off;
}

location /images/ {
    alias /home/mozaika/mozaika/public/images/;
    expires 30d;
    access_log off;
}
```

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∏ –∫–æ–Ω—Ç–∞–∫—Ç—ã

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:

1. **–¢–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–∞ REG.RU**: https://www.reg.ru/support/
2. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Next.js**: https://nextjs.org/docs
3. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Prisma**: https://www.prisma.io/docs

---

**üéâ –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ M¬≤ —É—Å–ø–µ—à–Ω–æ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç–æ –Ω–∞ REG.RU!**

–¢–µ–ø–µ—Ä—å –æ–Ω–æ –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É: `https://yourdomain.com`