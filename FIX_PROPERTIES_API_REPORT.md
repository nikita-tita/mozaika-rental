# üîß –û—Ç—á–µ—Ç –æ —Ä–∞–±–æ—Ç–µ –Ω–∞–¥ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º API —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—ä–µ–∫—Ç–æ–≤

## üìã –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å

### ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ
- ‚úÖ –°–æ–∑–¥–∞–Ω–∞ –≤–µ—Ç–∫–∞ `fix/properties-api`
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Å—Ö–µ–º–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ (—É–±—Ä–∞–Ω—ã –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–æ–ª—è `price`
- ‚úÖ –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- ‚úÖ –°–æ–∑–¥–∞–Ω —Ç–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç
- ‚úÖ –ò–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω—ã –≤ Git

### ‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º—ã
- ‚ùå –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Å—Ç–∞–±–∏–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç (–∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–µ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã)
- ‚ùå –ü—Ä–æ–±–ª–µ–º—ã —Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π –≤ —Ç–µ—Å—Ç–∞—Ö
- ‚ùå –ù—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –¥–µ–ø–ª–æ–π –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

## üîç –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º

### 1. –ü—Ä–æ–±–ª–µ–º–∞ —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
**–ë—ã–ª–æ:** –°—Ö–µ–º–∞ —Å–æ–¥–µ—Ä–∂–∞–ª–∞ –ø–æ–ª—è `city` –∏ `district`, –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ—Ç –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:** –£–±—Ä–∞–Ω—ã –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è –∏–∑ —Å—Ö–µ–º—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏

### 2. –ü—Ä–æ–±–ª–µ–º–∞ —Å –ø–æ–ª–µ–º price
**–ë—ã–ª–æ:** API –æ–∂–∏–¥–∞–ª —Ç–æ–ª—å–∫–æ `pricePerMonth`, –Ω–æ –≤ –ë–î –ø–æ–ª–µ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è `price`
**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:** –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –æ–±–æ–∏—Ö –ø–æ–ª–µ–π —Å fallback –Ω–∞ 0

### 3. –ü—Ä–æ–±–ª–µ–º–∞ —Å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º
**–ë—ã–ª–æ:** –¢–µ—Å—Ç—ã –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –Ω–∞ —Å—Ç–∞–±–∏–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
**–†–µ—à–µ–Ω–∏–µ:** –ù—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –¥–µ–ø–ª–æ–π —Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º–∏

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### 1. –°–æ–∑–¥–∞–Ω–∏–µ –¥–µ–ø–ª–æ—è –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
```bash
# –î–æ–∂–¥–∞—Ç—å—Å—è —Å–Ω—è—Ç–∏—è –ª–∏–º–∏—Ç–∞ Vercel (~29 –º–∏–Ω—É—Ç)
npx vercel --prod

# –ò–ª–∏ —Å–æ–∑–¥–∞—Ç—å –¥–µ–ø–ª–æ–π —Å –∫–∞—Å—Ç–æ–º–Ω—ã–º –∏–º–µ–Ω–µ–º
npx vercel --prod --name mozaika-fix-properties-api
```

### 2. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –Ω–æ–≤–æ–º –¥–µ–ø–ª–æ–µ
```bash
# –û–±–Ω–æ–≤–∏—Ç—å URL –≤ —Ç–µ—Å—Ç–æ–≤–æ–º —Å–∫—Ä–∏–ø—Ç–µ
# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã
npx tsx scripts/test-properties-api.ts
```

### 3. –ú–µ—Ä–∂ –≤ –≤–µ—Ç–∫—É —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
```bash
# –ï—Å–ª–∏ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ
git checkout development-v1.1
git merge fix/properties-api
git push origin development-v1.1
```

## üìä –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è API –¥–æ–ª–∂–µ–Ω:
- ‚úÖ –ü—Ä–∏–Ω–∏–º–∞—Ç—å –ø–æ–ª–µ `price` –∏–ª–∏ `pricePerMonth`
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ –≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ
- ‚úÖ –°–æ–∑–¥–∞–≤–∞—Ç—å –æ–±—ä–µ–∫—Ç—ã –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –í–æ–∑–≤—Ä–∞—â–∞—Ç—å –ø–æ–Ω—è—Ç–Ω—ã–µ –æ—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏

### –¢–µ—Å—Ç–æ–≤—ã–µ —Å–ª—É—á–∞–∏:
1. **–í–∞–ª–∏–¥–Ω—ã–π –æ–±—ä–µ–∫—Ç —Å price** - –¥–æ–ª–∂–µ–Ω —Å–æ–∑–¥–∞—Ç—å—Å—è
2. **–í–∞–ª–∏–¥–Ω—ã–π –æ–±—ä–µ–∫—Ç —Å pricePerMonth** - –¥–æ–ª–∂–µ–Ω —Å–æ–∑–¥–∞—Ç—å—Å—è
3. **–û–±—ä–µ–∫—Ç –±–µ–∑ —Ü–µ–Ω—ã** - –¥–æ–ª–∂–µ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å 0
4. **–û–±—ä–µ–∫—Ç —Å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–π —Ü–µ–Ω–æ–π** - –¥–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å –æ—à–∏–±–∫—É
5. **–û–±—ä–µ–∫—Ç –±–µ–∑ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π** - –¥–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å –æ—à–∏–±–∫—É
6. **–û–±—ä–µ–∫—Ç —Å –Ω–µ–≤–µ—Ä–Ω—ã–º —Ç–∏–ø–æ–º** - –¥–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å –æ—à–∏–±–∫—É

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ:

#### 1. –í–∞–ª–∏–¥–∞—Ü–∏—è (`src/lib/validations.ts`)
```typescript
// –ë—ã–ª–æ
pricePerMonth: z.coerce.number().positive('–ê—Ä–µ–Ω–¥–Ω–∞—è –ø–ª–∞—Ç–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–π')

// –°—Ç–∞–ª–æ
price: z.coerce.number().positive('–¶–µ–Ω–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–π').optional(),
pricePerMonth: z.coerce.number().positive('–ê—Ä–µ–Ω–¥–Ω–∞—è –ø–ª–∞—Ç–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–π').optional()
```

#### 2. API (`src/app/api/properties/route.ts`)
```typescript
// –ë—ã–ª–æ
price: validatedData.pricePerMonth

// –°—Ç–∞–ª–æ
price: validatedData.price || validatedData.pricePerMonth || 0
```

#### 3. –£–±—Ä–∞–Ω—ã –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è
- `city` - –Ω–µ—Ç –≤ —Å—Ö–µ–º–µ –ë–î
- `district` - –Ω–µ—Ç –≤ —Å—Ö–µ–º–µ –ë–î

## üìÅ –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

1. `scripts/test-properties-api.ts` - —Ç–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç
2. `FIX_PROPERTIES_API_REPORT.md` - —ç—Ç–æ—Ç –æ—Ç—á–µ—Ç

## üéØ –¶–µ–ª—å

–ò—Å–ø—Ä–∞–≤–∏—Ç—å API —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—ä–µ–∫—Ç–æ–≤ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏ —Ç–∞–∫, —á—Ç–æ–±—ã:
- –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥–∏–ª–∏ —É—Å–ø–µ—à–Ω–æ
- API –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–ª —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã –¥–∞–Ω–Ω—ã—Ö
- –û—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –±—ã–ª–∏ –ø–æ–Ω—è—Ç–Ω—ã–º–∏
- –°–∏—Å—Ç–µ–º–∞ –±—ã–ª–∞ —Å—Ç–∞–±–∏–ª—å–Ω–æ–π

## üìû –°–ª–µ–¥—É—é—â–∏–µ –¥–µ–π—Å—Ç–≤–∏—è

1. **–î–æ–∂–¥–∞—Ç—å—Å—è —Å–Ω—è—Ç–∏—è –ª–∏–º–∏—Ç–∞ Vercel**
2. **–°–æ–∑–¥–∞—Ç—å –¥–µ–ø–ª–æ–π —Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º–∏**
3. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –Ω–æ–≤–æ–º –¥–µ–ø–ª–æ–µ**
4. **–ï—Å–ª–∏ –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç - –º–µ—Ä–∂–∏—Ç—å –≤ development-v1.1**
5. **–û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é**

---

**–°—Ç–∞—Ç—É—Å:** üîÑ –í –ø—Ä–æ—Ü–µ—Å—Å–µ - –æ–∂–∏–¥–∞–Ω–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Å–æ–∑–¥–∞–Ω–∏—è –¥–µ–ø–ª–æ—è 